{"version":3,"file":"overview.controller.js","names":["overview","Controller","extend","onInit","_onInit","this","getView","addEventDelegate","onBeforeShow","_loadData","async","oView","oModel","getModel","getOwnerComponent","console","error","isLocal","window","location","hostname","port","sPath","log","oBinding","bindContext","execute","oContext","getBoundContext","result","getObject","data","value","oModelData","JSONModel","setModel","canceled","MessageBox","message"],"sources":["overview.controller.ts"],"sourcesContent":["import MessageBox from \"sap/m/MessageBox\";\nimport Controller from \"sap/ui/core/mvc/Controller\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\n/**\n * @namespace be.nmbs.overviewworkzone.controller\n */\nexport default class overview extends Controller {\n\n    public onInit(): void {\n        this.getView()?.addEventDelegate({\n            onBeforeShow: () => {\n                this._loadData();\n            }\n        });\n    }\n\n    private async _loadData(): Promise<void> {\n        const oView = this.getView();\n        if (!oView) return;\n\n        const oModel = (oView.getModel() || this.getOwnerComponent()?.getModel()) as ODataModel;\n\n        if (!oModel) {\n            console.error(\"OData v4 model 'mainService' niet gevonden.\");\n            return;\n        }\n\n        try {\n            var isLocal: boolean = window.location.hostname === \"localhost\" || \n                                     window.location.hostname === \"127.0.0.1\" ||\n                                     window.location.port === \"4004\";\n            \n            const sPath = isLocal ? \"/analyzeExport(...)\" : \"/analyzeFromDestination(...)\";\n            \n            console.log(`Binding to path: ${sPath}`);\n\n            const oBinding = oModel.bindContext(sPath);\n\n            await oBinding.execute();\n\n            const oContext = oBinding.getBoundContext();\n            const result = oContext ? oContext.getObject() as any : null;\n\n            const data = result?.value || result;\n            const oModelData = new JSONModel(data);\n            \n            this.getView()?.setModel(oModelData);\n            \n            console.log(\"Data succesvol geladen\");\n\n        } catch (error: any) {\n            console.error(\"Fout tijdens laden:\", error);\n            if (!error.canceled) {\n                MessageBox.error(\"Data ophalen mislukt: \" + (error.message || \"Server Error\"));\n            }\n        }\n    }\n}"],"mappings":"2HAKA,MAGqBA,EAAiBC,EAAUC,OAAA,gDAErCC,OAAM,SAAAC,IACTC,KAAKC,WAAWC,iBAAiB,CAC7BC,aAAcA,KACVH,KAAKI,cAGjB,EAEcA,UAASC,eAAAD,IACnB,MAAME,EAAQN,KAAKC,UACnB,IAAKK,EAAO,OAEZ,MAAMC,EAAUD,EAAME,YAAcR,KAAKS,qBAAqBD,WAE9D,IAAKD,EAAQ,CACTG,QAAQC,MAAM,+CACd,MACJ,CAEA,IACI,IAAIC,EAAmBC,OAAOC,SAASC,WAAa,aAC3BF,OAAOC,SAASC,WAAa,aAC7BF,OAAOC,SAASE,OAAS,OAElD,MAAMC,EAAQL,EAAU,sBAAwB,+BAEhDF,QAAQQ,IAAI,oBAAoBD,KAEhC,MAAME,EAAWZ,EAAOa,YAAYH,SAE9BE,EAASE,UAEf,MAAMC,EAAWH,EAASI,kBAC1B,MAAMC,EAASF,EAAWA,EAASG,YAAqB,KAExD,MAAMC,EAAOF,GAAQG,OAASH,EAC9B,MAAMI,EAAa,IAAIC,EAAUH,GAEjC1B,KAAKC,WAAW6B,SAASF,GAEzBlB,QAAQQ,IAAI,yBAEhB,CAAE,MAAOP,GACLD,QAAQC,MAAM,sBAAuBA,GACrC,IAAKA,EAAMoB,SAAU,CACjBC,EAAWrB,MAAM,0BAA4BA,EAAMsB,SAAW,gBAClE,CACJ,CACJ,IAAC,OAlDgBtC,CAAQ","ignoreList":[]}