{"version":3,"file":"overview-dbg.controller.js","names":["overview","Controller","extend","onInit","_onInit","getView","addEventDelegate","onBeforeShow","_loadData","oView","oModel","getModel","getOwnerComponent","console","error","isLocal","window","location","hostname","port","sPath","log","oBinding","bindContext","execute","oContext","getBoundContext","result","getObject","data","value","oModelData","JSONModel","setModel","canceled","MessageBox","message"],"sources":["overview.controller.ts"],"sourcesContent":["import MessageBox from \"sap/m/MessageBox\";\nimport Controller from \"sap/ui/core/mvc/Controller\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\n/**\n * @namespace be.nmbs.overviewworkzone.controller\n */\nexport default class overview extends Controller {\n\n    public onInit(): void {\n        this.getView()?.addEventDelegate({\n            onBeforeShow: () => {\n                this._loadData();\n            }\n        });\n    }\n\n    private async _loadData(): Promise<void> {\n        const oView = this.getView();\n        if (!oView) return;\n\n        const oModel = (oView.getModel() || this.getOwnerComponent()?.getModel()) as ODataModel;\n\n        if (!oModel) {\n            console.error(\"OData v4 model 'mainService' niet gevonden.\");\n            return;\n        }\n\n        try {\n            var isLocal: boolean = window.location.hostname === \"localhost\" || \n                                     window.location.hostname === \"127.0.0.1\" ||\n                                     window.location.port === \"4004\";\n            \n            const sPath = isLocal ? \"/analyzeExport(...)\" : \"/analyzeFromDestination(...)\";\n            \n            console.log(`Binding to path: ${sPath}`);\n\n            const oBinding = oModel.bindContext(sPath);\n\n            await oBinding.execute();\n\n            const oContext = oBinding.getBoundContext();\n            const result = oContext ? oContext.getObject() as any : null;\n\n            const data = result?.value || result;\n            const oModelData = new JSONModel(data);\n            \n            this.getView()?.setModel(oModelData);\n            \n            console.log(\"Data succesvol geladen\");\n\n        } catch (error: any) {\n            console.error(\"Fout tijdens laden:\", error);\n            if (!error.canceled) {\n                MessageBox.error(\"Data ophalen mislukt: \" + (error.message || \"Server Error\"));\n            }\n        }\n    }\n}"],"mappings":";;;EAKA;AACA;AACA;EAFA,MAGqBA,QAAQ,GAASC,UAAU,CAAAC,MAAA;IAErCC,MAAM,WAAAC,QAAA,EAAS;MAClB,IAAI,CAACC,OAAO,CAAC,CAAC,EAAEC,gBAAgB,CAAC;QAC7BC,YAAY,EAAEA,CAAA,KAAM;UAChB,IAAI,CAACC,SAAS,CAAC,CAAC;QACpB;MACJ,CAAC,CAAC;IACN,CAAC;IAEaA,SAAS,iBAAAA,UAAA,EAAkB;MACrC,MAAMC,KAAK,GAAG,IAAI,CAACJ,OAAO,CAAC,CAAC;MAC5B,IAAI,CAACI,KAAK,EAAE;MAEZ,MAAMC,MAAM,GAAID,KAAK,CAACE,QAAQ,CAAC,CAAC,IAAI,IAAI,CAACC,iBAAiB,CAAC,CAAC,EAAED,QAAQ,CAAC,CAAgB;MAEvF,IAAI,CAACD,MAAM,EAAE;QACTG,OAAO,CAACC,KAAK,CAAC,6CAA6C,CAAC;QAC5D;MACJ;MAEA,IAAI;QACA,IAAIC,OAAgB,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,IACtCF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,IACxCF,MAAM,CAACC,QAAQ,CAACE,IAAI,KAAK,MAAM;QAExD,MAAMC,KAAK,GAAGL,OAAO,GAAG,qBAAqB,GAAG,8BAA8B;QAE9EF,OAAO,CAACQ,GAAG,CAAC,oBAAoBD,KAAK,EAAE,CAAC;QAExC,MAAME,QAAQ,GAAGZ,MAAM,CAACa,WAAW,CAACH,KAAK,CAAC;QAE1C,MAAME,QAAQ,CAACE,OAAO,CAAC,CAAC;QAExB,MAAMC,QAAQ,GAAGH,QAAQ,CAACI,eAAe,CAAC,CAAC;QAC3C,MAAMC,MAAM,GAAGF,QAAQ,GAAGA,QAAQ,CAACG,SAAS,CAAC,CAAC,GAAU,IAAI;QAE5D,MAAMC,IAAI,GAAGF,MAAM,EAAEG,KAAK,IAAIH,MAAM;QACpC,MAAMI,UAAU,GAAG,IAAIC,SAAS,CAACH,IAAI,CAAC;QAEtC,IAAI,CAACxB,OAAO,CAAC,CAAC,EAAE4B,QAAQ,CAACF,UAAU,CAAC;QAEpClB,OAAO,CAACQ,GAAG,CAAC,wBAAwB,CAAC;MAEzC,CAAC,CAAC,OAAOP,KAAU,EAAE;QACjBD,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,IAAI,CAACA,KAAK,CAACoB,QAAQ,EAAE;UACjBC,UAAU,CAACrB,KAAK,CAAC,wBAAwB,IAAIA,KAAK,CAACsB,OAAO,IAAI,cAAc,CAAC,CAAC;QAClF;MACJ;IACJ;EAAC;EAAA,OAlDgBpC,QAAQ;AAAA","ignoreList":[]}